# Теги

## Для чего нужны теги ?

Теги - это своего рода разметка комнат, которые помогут в сложной выборке (фильтре) комнат.

## Как их использовать ?

- Прежде всего нужно описать файл конфигурации настроек тегов `tags.config.json` и положить в папку `/usr/src/app/dist/tagsConfig` через `docker volume` ( а при запуске в дев-режиме локально нужно положить этот файл в папку `src/tagsConfig` ).

### Пример конфигурационного файла

```json
{
  "strict": true, // Строгость валидации, если true -- то только по rules, если false, то можно добавлять теги, которых нет в rules
  "nullValue": null,
  "rules": [
    {
      "tagName": "entityType", // Имя тега
      "type": "string", // Тип тега
      "private": true // Признак: приватный тег — тег для внутреннего использование, публиичный — отправляется на фронты
    },
    {
      "tagName": "orderId",
      "type": "string",
      "private": false
    }
  ]
}
```

- Дальше нужно отправлять теги в чат-сервис, чтобы они там создавались. При создании комнат в боди отправляете массив тегов.

```typescript
[
  {
    tagName: "orderId",
    value: "orderUUID",
    private: false,
  },
  {
    tagName: "entityType",
    value: "Order",
    private: true,
  },
];
```

Чат сервис валидирует полученные теги в зависимости от настроек конфигурационного файла, если теги указаны правильно создается комната, которая будет подмечена этими тегами.

- Осталось получение комнат по тегам.  
  Для получения нужных комнат при листинге, в теле запроса нужно отправить поле tags с данными следующего типа:

```typescript
[
  {
    tagName: "orderId",
    value: "orderUUID",
  },
  {
    tagName: "entityType",
    value: "Order",
  },
];
```

В ответ получите комнаты, которые подмечены этими тегами
